# eurobot_23

authors: Daniloff Valery, Popoff Maxim

# Настройка системы
## Подключение к роботу по SSH
0) Если вы используете виртуальную машину, то сеть нужно настроить через мост.
1) На обоих системах (робот и ваш компьютер) внести изменения в `/etc/hosts` (скорее всего надо использовать sudo)
```
local-ip-pc     pc-name
local-ip-robot  robot-name
```
Например
```
192.168.1.8   maxim
192.168.1.12  orangepi4-lts
```

Свой ip можно узнать, например, через ifconfig (должен начинаться на 192.168), ifconfig надо установить. ip робота узнается либо подключением робота к компьютеру, либо в настройке роутера, либо ***у товарищей***. ip меняется на разных роутерах.

2) Если все настроено верно, то получится подключится к роботу так:

```
ssh robot-user-name@robot-name
```
Например

```
ssh orangepi@orangepi4-lts
```
После чего система может задать вопрос про fingerprint, ответить yes. Далее ввести пароль робота и пользоваться им.

## VSCode и SSH
VSCode умеет дружить с SSH. Это удобно, т.к. по SSH очень плохо отрисовываются графические интерфейсы (он для этого просто не создан). Чтобы копаться в файлах робота через SSH надо всего лишь:
1) Скачать дополнение Remote Development от Microsoft
2) Добавить цель (ssh target во вкладке Remote Expoler). Та же команда, что и обычно.
3) Указать ssh конфиг. У меня это `/home/user-name/.ssh/config`. Сам VSCode предложит варанты. В этом пункте могут быть проблемы, если у SSH поменять порт, но мы пока ничего не меняем.

## Настройка ROS Multiple machines
0) Проверить, что правильно внесены найстройки в `/etc/hosts` (прошлый пункт)
1) На обоих машинах внести изменения в `~/.bashrc` (это конфиг bash терминала, надеюсь вы сидите на ubuntu...). То есть изменения возникнут только после перезагрузки терминала.
```
# Строка отвечает за настройку bash под ROS. Так у вас будут сразу работать ROS-команды и выгрузятся ROS-переменные 
source /opt/ros/noetic/setup.bash 

# ROS-переменные для настройки multiple machines
ROS_MASTER_URI=http://master_name:11311/
ROS_HOSTNAME=machine_name
ROS_IP=machine_ip
```
Мы настраиваем так, чтобы ваш компьютер был мастером (он создает roscore, на нем запускаются все "тяжелые" ноды). Поэтому на вашем пк `machine_name` и `master_name` совпадают. На всех машинах `master_name` одинаковый. `machine_name` - имя вашего ПК, у меня это `ROS_HOSTNAME=maxim`. Проверьте, чтобы ROS_IP совпадали с теми, что написаны в `hosts`. Пример с orangepi:
```
ROS_MASTER_URI=http://maxim:11311/
ROS_HOSTNAME=orangepi4-lts
ROS_IP=192.168.1.12
```
2) Если все настроено верно, то запустите на вашем компьютере `roscore`. Тогда команда `rostopic list` на роботе должна показать запущенные топики.
